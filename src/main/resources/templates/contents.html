<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MYAN MYAN LEARN - Contents</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/js/tailwind-config.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .show {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) !important;
      }
    </style>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-800 font-sans text-gray-800 flex flex-col"
  >
    <nav th:replace="fragments/navbar :: appNavbar('Learning Platform')"></nav>

    <main class="flex-1 pt-28 pb-16">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-6">
          <h1
            class="text-white text-2xl sm:text-3xl font-bold flex items-center gap-3 flex-1 min-w-0"
          >
            <span
              th:if="${courseTitle}"
              class="block truncate text-white text-2xl sm:text-3xl font-bold"
              th:text="${courseTitle}"
              >Course Title</span
            >
          </h1>
          <a
            href="/home"
            class="flex items-center gap-2 text-white/80 hover:text-white transition bg-white/10 hover:bg-white/15 px-3 py-2 rounded-lg no-underline flex-shrink-0"
          >
            <i class="fas fa-arrow-left text-xs"></i>
            <span th:text="#{reader.back}">Back</span>
          </a>
        </div>

        <div id="courseContents" class="space-y-3">
          <!-- Dynamic course contents (each item is a direct child for proper spacing) -->
          <div
            th:if="${course != null}"
            th:each="content, ci : ${course.contents}"
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >0%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span
                    class="text-xs sm:text-sm text-white/70"
                    th:text="${content.chapter != null ? content.chapter : 'Chapter ' + content.order}"
                    >Chapter</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    th:text="${content.title}"
                    >Chapter Title</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <a
                class="block text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition no-underline"
                th:each="sub, si : ${content.subcontents}"
                th:href="@{/reader(courseId=${course.id}, ch=${content.order}, sc=${sub.order})}"
              >
                <div class="flex items-center gap-3">
                  <span
                    class="truncate"
                    th:text="${content.order + '-' + sub.order + ' ' + sub.title}"
                    >1.1 Subcontent</span
                  >
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 0%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >0%</span
                      >
                    </div>
                  </div>
                </div>
              </a>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4 hidden"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >30%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 2</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Nouns and Pronouns</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">2.1 Countable vs Uncountable</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 35%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >35%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">2.2 Pronoun Agreement</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 60%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >60%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4 hidden"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >45%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 3</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Verbs and Tenses</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">3.1 Present Tenses</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 20%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >20%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">3.2 Past Tenses</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 40%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >40%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">3.3 Future Forms</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 55%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >55%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4 hidden"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >60%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 4</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Adjectives and Adverbs</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">4.1 Comparative Forms</span>
                  <div class="w-3/12 ml-auto">
                    <div class="h-4 bg-white/10 rounded-full overflow-hidden">
                      <div
                        class="h-full bg-blue-400 rounded-full relative"
                        style="width: 30%"
                      >
                        <span
                          class="absolute inset-0 flex items-center justify-center text-[10px] text-white/90"
                          >30%</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">4.2 Superlatives</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 70%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >70%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >75%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 5</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Prepositions</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">5.1 Place and Time</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 45%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >45%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">5.2 Common Phrases</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 80%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >80%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >10%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 6</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Conjunctions</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">6.1 Coordinating</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 15%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >15%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">6.2 Subordinating</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 35%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >35%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div
            class="bg-white/10 border border-white/10 rounded-xl p-3 sm:p-4"
            th:remove="all"
          >
            <button
              class="w-full flex items-start gap-3 sm:gap-4 text-left group content-toggle"
              aria-expanded="false"
            >
              <div class="relative w-10 h-10 sm:w-12 sm:h-12">
                <svg class="w-full h-full -rotate-90" viewBox="0 0 36 36">
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="stroke-white/20"
                    stroke-width="4"
                  ></circle>
                  <circle
                    cx="18"
                    cy="18"
                    r="15"
                    fill="none"
                    class="progress-ring stroke-blue-400"
                    stroke-width="4"
                    stroke-linecap="round"
                  ></circle>
                </svg>
                <span
                  class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs text-white font-semibold progress-text"
                  >0%</span
                >
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex flex-col gap-0.5 leading-tight">
                  <span class="text-xs sm:text-sm text-white/70"
                    >Chapter 7</span
                  >
                  <span
                    class="text-white font-semibold text-sm sm:text-base truncate"
                    >Practice Exercises</span
                  >
                </div>
              </div>
              <i
                class="fas fa-chevron-down text-white/70 text-xs sm:text-sm transition-transform content-arrow"
              ></i>
            </button>
            <div
              class="mt-2 pl-11 sm:pl-14 space-y-2 content-sublist max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-out"
            >
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">7.1 Quiz 1</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-400 rounded-full"
                        style="width: 0%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >0%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="text-white/90 text-xs sm:text-sm cursor-pointer hover:text-white hover:underline hover:bg-white/5 rounded-md px-2 py-1 transition"
                tabindex="0"
              >
                <div class="flex items-center gap-3">
                  <span class="truncate">7.2 Quiz 2</span>
                  <div class="w-3/12 ml-auto">
                    <div
                      class="h-4 bg-white/10 rounded-full overflow-hidden relative"
                    >
                      <div
                        class="h-full bg-blue-500 rounded-full"
                        style="width: 0%"
                      ></div>
                      <span
                        class="absolute inset-0 flex items-center justify-center text-[10px] sm:text-xs font-semibold text-white/90"
                        >0%</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Display selected course title from query string or localStorage
        const selectedTitleEl = document.getElementById("selectedCourseTitle");
        const params = new URLSearchParams(window.location.search);
        const courseTitle =
          params.get("course") || localStorage.getItem("selectedCourse");
        if (selectedTitleEl) {
          if (courseTitle) {
            selectedTitleEl.textContent = courseTitle;
            selectedTitleEl.classList.remove("hidden");
          } else {
            selectedTitleEl.classList.add("hidden");
          }
        }

        const contents = document.getElementById("courseContents");
        // Initialize progress circles
        const rings = contents
          ? contents.querySelectorAll(".progress-ring")
          : [];
        const texts = contents
          ? contents.querySelectorAll(".progress-text")
          : [];
        const radius = 15;
        const circumference = 2 * Math.PI * radius;
        rings.forEach((ring, idx) => {
          const text = texts[idx];
          if (!text) return;
          const percent = parseInt(text.textContent.replace("%", "")) || 0;
          ring.setAttribute("stroke-dasharray", `${circumference}`);
          const offset = circumference - (percent / 100) * circumference;
          ring.setAttribute("stroke-dashoffset", `${offset}`);
        });

        // Accordion behavior with Tailwind transitions
        const toggles = contents
          ? contents.querySelectorAll(".content-toggle")
          : [];
        toggles.forEach((btn) => {
          btn.addEventListener("click", function () {
            const item = this.parentElement;
            const sub = item.querySelector(".content-sublist");
            const arrow = item.querySelector(".content-arrow");
            const isExpanded = this.getAttribute("aria-expanded") === "true";

            // Close all others
            contents.querySelectorAll(".content-sublist").forEach((el) => {
              el.classList.remove("max-h-40", "sm:max-h-60", "opacity-100");
              el.classList.add("max-h-0", "opacity-0");
            });
            contents
              .querySelectorAll(".content-toggle")
              .forEach((b) => b.setAttribute("aria-expanded", "false"));
            contents
              .querySelectorAll(".content-arrow")
              .forEach((a) => a.classList.remove("rotate-180"));

            // If it was not expanded, open this one
            if (!isExpanded && sub) {
              sub.classList.remove("max-h-0", "opacity-0");
              sub.classList.add("max-h-40", "sm:max-h-60", "opacity-100");
              this.setAttribute("aria-expanded", "true");
              if (arrow) arrow.classList.add("rotate-180");
            }
          });
        });
      });
    </script>
    <script src="/js/navbar.js"></script>
  </body>
</html>
